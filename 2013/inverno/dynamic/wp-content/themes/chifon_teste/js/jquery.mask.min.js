// jQuery Mask Plugin v0.7.8
// github.com/igorescobar/jQuery-Mask-Plugin
(function(a){var b;var c=function(h,d,e){var i=this,f=a(h),j={byPassKeys:[8,9,37,38,39,40],maskChars:{":":":","-":"-",".":"\\.","(":"\\(",")":"\\)","/":"/",",":",",_:"_"," ":"\\s","+":"\\+"},translationNumbers:{0:"\\d",1:"\\d",2:"\\d",3:"\\d",4:"\\d",5:"\\d",6:"\\d",7:"\\d",8:"\\d",9:"\\d"},translation:{A:"[a-zA-Z0-9]",S:"[a-zA-Z]"}};i.init=function(){i.settings={};e=e||{};j.translation=a.extend({},j.translation,j.translationNumbers);i.settings=a.extend(true,{},j,e);i.settings.specialChars=a.extend({},i.settings.maskChars,i.settings.translation);f.each(function(){d=g.resolveMask();f.attr("maxlength",d.length);f.attr("autocomplete","off");g.destroyEvents();g.setOnKeyUp();g.setOnPaste()})};var g={resolveMask:function(){return typeof d=="function"?d(g.getVal(),b,e):d},onPasteMethod:function(){setTimeout(function(){f.trigger("keyup")},100)},setOnPaste:function(){g.hasOnSupport()?f.on("paste",g.onPasteMethod):f.get(0).addEventListener("paste",g.onPasteMethod,false)},setOnKeyUp:function(){f.keyup(g.maskBehaviour).trigger("keyup")},setVal:function(k){return f.val(k)},getVal:function(){return f.val()},hasOnSupport:function(){return a.isFunction(a().on)},destroyEvents:function(){f.unbind("keyup").unbind("onpaste")},maskBehaviour:function(p){p=p||window.event;var o=p.keyCode||p.which,k;if(a.inArray(o,i.settings.byPassKeys)>-1){return true}var n=g.cleanBullShit(g.getVal(),d),m=g.getVal().length-1,l=g.getVal()[m],q=g.getMask(n,d);if(l===d[m]&&i.settings.maskChars[l]){g.setVal(n!==""?n+=l:n);return true}k=g.applyMask(p,q);if(k!==g.getVal()){g.setVal(k).trigger("change")}return g.seekCallbacks(p,k)},applyMask:function(m,k){if(k===""){return}var l=g.cleanBullShit(g.getVal(),k).substring(0,k.length),n=new RegExp(g.maskToRegex(k));return l.replace(n,function(){for(var p=1,o="";p<arguments.length-2;p++){if(typeof arguments[p]==="undefined"||arguments[p]===""){arguments[p]=k.charAt(p-1)}o+=arguments[p]}return o})},getMask:function(l){var k=function(o){var p=0,n=0;while(n<=o.length-1){while(i.settings.maskChars[d.charAt(p)]){p++}p++;n++}return d.substring(0,p)};var m=function(o){var r=0,q=0,n=0,p=d.length;r=(p>=1)?p:p-1;q=r;while(n<=o.length-1){while(i.settings.maskChars[d.charAt(q-1)]){q--}q--;n++}q=(d.length>=1)?q:q-1;return d.substring(r,q)};return(typeof e.reverse=="boolean"&&e.reverse===true)?m(l):k(l)},maskToRegex:function(k){for(var l=0,m="";l<k.length;l++){var n=i.settings.specialChars[k.charAt(l)];if(n){m+="("+n+")"}if(i.settings.maskChars[k.charAt(l)]){m+="?"}}return m},validDigit:function(k,m){var l="("+i.settings.specialChars[k]+")";if(i.settings.maskChars[k]){l+="?"}return new RegExp(l).test(m)},cleanBullShit:function(p,l,o){o=o||0;p=p.split("");for(var q=o,k=o,r=l.length,n=p.length;q<r;q++,k++){while(i.settings.maskChars[l.charAt(k)]){k++}if(!g.validDigit(l.charAt(k),p[q])&&typeof p[q]!=="undefined"){p[q]="";p=p.join("");return g.cleanBullShit(p,g.getMask(p,l),0)}}return p.join("")},seekCallbacks:function(l,k){if(e.onKeyPress&&l.isTrigger===undefined&&typeof e.onKeyPress=="function"){e.onKeyPress(k,l,f,e)}if(e.onComplete&&l.isTrigger===undefined&&k.length===d.length&&typeof e.onComplete=="function"){e.onComplete(k,l,f,e)}}};if(typeof QUNIT==="boolean"){i.__p=g}i.remove=function(){g.destroyEvents();g.setVal(g.getVal().replace(/\D+/g,""))};i.init()};a.fn.mask=function(d,e){return this.each(function(){a(this).data("mask",new c(this,d,e))})}})(jQuery);
